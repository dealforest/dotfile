export PATH=:$PATH:~/bin/
export EDITOR=vim
export PAGER=less

#######################################################
#
#   for mac
#
#######################################################
if [ `uname` = 'Darwin' ]; then
    export PATH=/opt/local/bin:/opt/local/sbin/:$PATH
    export MANPATH=/opt/local/man:$MANPATH

    alias o='open .'
    alias updatedb='sudo /usr/libexec/locate.updatedb'
    alias locate='/usr/bin/locate'
    export SETUP_SH_VMARGS=-Dfile.encoding=UTF8
fi

#######################################################
#
#   common shortcut
#
#######################################################
alias l='ls --color=auto' ls='ls --color=auto' ll='ls -l --color=auto' la='ls -la --color=auto'
alias vi=vim v=vim mvi='open -a Vim'
alias g=git gs='git svn'
alias perldoc='env LANG=C perldoc'
alias phpinfo='php -r "phpinfo\(\);"'
alias sshnew='ssh -S none'
alias ssh_eucjp='cocot -t UTF-8 -p EUC-JP ssh'
alias ssh_sjis='cocot -t UTF-8 -p SJIS ssh'

if [ -x /opt/local/bin/colordiff ];then
    alias diff='colordiff'
fi
#######################################################
#
#   project shortcut
#
#######################################################
alias cdp='cd  $PERLBREW_ROOT/perls/$PERLBREW_PERL/lib/site_perl'

#######################################################
#
#   option
#
#######################################################
alias -g V='| vim -R -'
alias -g L='| less -R'
alias -g H='| head'
alias -g T='| tail'
alias -g G='| grep'
alias -g W='| wc'
alias -g S='| sed'
alias -g A='| awk'
alias -g X='| xargs'
alias -g LV='| lv -c'
alias -g LE='|& less'
alias -g HE='|& head'
alias -g TE='|& tail'
alias -g GE='|& grep'
alias -g WE='|& wc'
alias -g SE='|& sed'
alias -g AE='|& awk'
alias -g XE='|& xargs'
alias -g WIN='| iconv -f UTF8-MAC -t UTF-8'
alias -g FIN='; growlnotify -t finished -m "end commandline"'

if which pbcopy >/dev/null 2>&1 ; then 
    # Mac  
    alias -g C='| pbcopy'
elif which xsel >/dev/null 2>&1 ; then 
    # Linux
    alias -g C='| xsel --input --clipboard'
elif which putclip >/dev/null 2>&1 ; then 
    # Cygwin 
    alias -g C='| putclip'
fi

alias vic='vim -c ":set ft=javascript.titanium"'
alias vij='vim -c ":set ft=javascript.jquery"'
alias vir='vim -c ":set ft=javascript.rails"'
alias vin='vim -c ":set ft=nginx"'

#######################################################
#
#   directory move.
#
#######################################################
alias ...='cd ../../'
alias ....='cd ../../../'
alias sr='cd ~/work/repos/svn/' gr='cd ~/work/repos/git/' hr='cd ~/work/repos/hg/' br='cd ~/work/repos/bzr/'
alias sp='cd ~/work/repos/actionscript/lib/spark/as3'
alias pj='cd ~/work/projects/'
alias media='cd ~/work/media/'
alias pg='cd ~/work/programing/'
alias sni='cd ~/.vim/snippets/' 
alias lang='cd ~/work/programing/lang/'

#######################################################
#
#   for perl
#
#######################################################
alias perld='perl -MO=Deparse,-x5'

#######################################################
#
#   for CPAN
#
#######################################################
alias cpan-uninstall='\perl -MExtUtils::Install -MExtUtils::Installed -e "unshift@ARGV,new ExtUtils::Installed;sub a{\@ARGV};uninstall((eval{a->[0]->packlist(a->[1])}||do{require CPAN;a->[0]->packlist(CPAN::Shell->expandany(a->[1])->distribution->base_id=~m/(.*)-[^-]+$/)})->packlist_file,1,a->[2])"'
alias cpan-update-all='perl -MCPAN -e '"'"'CPAN::Shell->install(CPAN::Shell->r)'"'"

#######################################################
#
#   for local::lib
#
#######################################################
if [ -d "$HOME/local" ]; then
    eval $(perl -I$HOME/local/lib/perl5 -Mlocal::lib=$HOME/local)
fi
     
#######################################################
#
#   for MySQL
#
#######################################################
export MYSQL_PS1='\u@\h:\d > ' 

#######################################################
#
#   function
#
#######################################################
function iname() {
    find . -type d -name .svn -prune -o \( -iname "*$1*" -print \)
}
alias inaem=iname

function locallib() {
    INSTALL_BASE=~/perl5/extlib/$1
    if [ -d $INSTALL_BASE ]; then
        eval $(~/bin/use-locallib $INSTALL_BASE)
    else
        echo "don't find directory : $INSTALL_BASE"
    fi
}

function clocallib() {
    INSTALL_DIR="$PERL_MM_OPT/lib/perl5"
    cd $(echo $INSTALL_DIR | sed -e "s|INSTALL_BASE=||")
}

function crlocallib() {
    cd $(echo $PERL_MM_OPT | sed -e "s|INSTALL_BASE=||")
}

function cdgem() { 
    cd `echo $GEM_HOME/**/gems/$1*|awk -F' ' '{print $1}'`
}

compctl -K _cdgem cdgem
function _cdgem() {
    reply=(`find $GEM_HOME -type d|grep -e '/gems/[^/]\+$'|xargs basename|sort -nr`)
}


#######################################################
#
#   load other config
#
#######################################################
[ -f ~/.zshrc.local ] && source ~/.zshrc.local

